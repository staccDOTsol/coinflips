(this["webpackJsonpcandy-machine-mint"]=this["webpackJsonpcandy-machine-mint"]||[]).push([[0],{31:function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"f",(function(){return u})),n.d(t,"a",(function(){return f}));var r=n(13),a=new r.PublicKey("9pJ55KszBGk1Td3LbRrWLszAaiXg7YLW5oouLABJwsZg"),c="rng_house",i="fees",s="treasury",o="4tui4yfA6MNgLhjXmKBATrPvEUGseEeqQrqAyVHintUQ",u=(new r.PublicKey(o),new r.PublicKey("ASTu9TrWQkQL693SzAZ2533f871WUP3RxkW9y6nLGP9L")),f=3e4},389:function(e,t,n){},390:function(e,t,n){},391:function(e,t){},393:function(e,t){},409:function(e,t){},410:function(e,t){},517:function(e,t){},519:function(e,t){},533:function(e,t){},537:function(e,t){},539:function(e,t){},549:function(e,t){},551:function(e,t){},578:function(e,t){},580:function(e,t){},585:function(e,t){},587:function(e,t){},593:function(e,t){},595:function(e,t){},607:function(e,t){},610:function(e,t){},622:function(e,t){},623:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(34),i=n.n(c),s=(n(389),n(390),n(2)),o=n.n(s),u=n(3),f=n(12),l=n(21),b=n(109),p=n(13),d=n(63),h=n(16),j=n(55),m=n(65),x=n(31),O=function(){var e=Object(u.a)(o.a.mark((function e(t,n,r){var a,c,i,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.c)(t);case 2:return a=e.sent,e.next=5,Object(m.a)(t,n,r);case 5:return c=e.sent,i=Object(f.a)(c,2),s=i[0],u=i[1],e.abrupt("return",a.instruction.initialize(u,r,{accounts:{puppet:s,user:t.publicKey,systemProgram:p.SystemProgram.programId,recentBlockhashes:j.e.SYSVAR_RECENT_BLOCKHASHES_PUBKEY,house:n},signers:[]}));case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=Object(u.a)(o.a.mark((function e(t,n,r){var a,c,i,s,u,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.a)(t,x.f,r);case 2:return c=e.sent,i=Object(f.a)(c,2),s=i[0],i[1],e.next=8,Object(m.c)(t);case 8:return u=e.sent,e.next=11,u.account.house.fetch(x.f);case 11:return l=e.sent,e.abrupt("return",u.instruction.pullStrings(new j.a(n*Math.pow(10,9)),{accounts:(a={author:l.author,authorFeeAccount:l.authorFeeAccount,operator:l.operator},Object(h.a)(a,"authorFeeAccount",l.authorFeeAccount),Object(h.a)(a,"operatorFeeAccount",l.operatorFeeAccount),Object(h.a)(a,"house",x.f),Object(h.a)(a,"puppet",s),Object(h.a)(a,"operatorTreasury",l.operatorTreasury),Object(h.a)(a,"recentBlockhashes",j.e.SYSVAR_RECENT_BLOCKHASHES_PUBKEY),Object(h.a)(a,"jare",x.g),Object(h.a)(a,"user",t.publicKey),Object(h.a)(a,"systemProgram",p.SystemProgram.programId),a),remainingAccounts:[{pubkey:l.operatorTreasury,isSigner:!1,isWritable:!0}],signers:[]}));case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),v=n(18),w=n(50),y=n.n(w),k=function(){var e=Object(u.a)(o.a.mark((function e(t,n,r,a){var c,i,s,u,f,l,b,d=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=d.length>4&&void 0!==d[4]?d[4]:"confirmed",i=d.length>5&&void 0!==d[5]&&d[5],s=d.length>6?d[6]:void 0,d.length>7?d[7]:void 0,u=new p.Transaction,r.forEach((function(e){return u.add(e)})),e.t0=s,e.t0){e.next=11;break}return e.next=10,t.getRecentBlockhash(c);case 10:e.t0=e.sent;case 11:return u.recentBlockhash=e.t0.blockhash,i?u.setSigners.apply(u,Object(v.a)(a.map((function(e){return e.publicKey})))):u.setSigners.apply(u,[n.publicKey].concat(Object(v.a)(a.map((function(e){return e.publicKey}))))),e.next=15,null===n||void 0===n?void 0:n.signTransaction(u);case 15:return e.next=17,S({connection:t,signedTransaction:u});case 17:return f=e.sent,l=f.txid,b=f.slot,e.abrupt("return",{txid:l,slot:b});case 21:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}();function S(e){return T.apply(this,arguments)}function T(){return(T=Object(u.a)(o.a.mark((function e(t){var n,r,a,c,i,s,f,l,b,p,d,h,j;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.timeout,c=void 0===a?x.a:a,i=n.serialize(),s=Object(m.b)(),f=0,e.next=6,r.sendRawTransaction(i,{skipPreflight:!0});case 6:return l=e.sent,y.a.debug("Started awaiting confirmation for",l),b=!1,Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b||!(Object(m.b)()-s<c)){e.next=6;break}return r.sendRawTransaction(i,{skipPreflight:!0}),e.next=4,Object(m.d)(500);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=10,e.next=13,R(l,c,r,"confirmed",!0);case 13:if(p=e.sent){e.next=16;break}throw new Error("Timed out awaiting confirmation on transaction");case 16:if(!p.err){e.next=19;break}throw y.a.error(p.err),new Error("Transaction failed: Custom instruction error");case 19:f=(null===p||void 0===p?void 0:p.slot)||0,e.next=49;break;case 22:if(e.prev=22,e.t0=e.catch(10),y.a.error("Timeout Error caught",e.t0),!e.t0.timeout){e.next=27;break}throw new Error("Timed out awaiting confirmation on transaction");case 27:return d=null,e.prev=28,e.next=31,P(r,n,"single");case 31:d=e.sent.value,e.next=37;break;case 34:e.prev=34,e.t1=e.catch(28),y.a.error("Simulate Transaction error",e.t1);case 37:if(!d||!d.err){e.next=48;break}if(!d.logs){e.next=47;break}h=d.logs.length-1;case 40:if(!(h>=0)){e.next=47;break}if(!(j=d.logs[h]).startsWith("Program log: ")){e.next=44;break}throw new Error("Transaction failed: "+j.slice("Program log: ".length));case 44:--h,e.next=40;break;case 47:throw new Error(JSON.stringify(d.err));case 48:y.a.error("Got this far.");case 49:return e.prev=49,b=!0,e.finish(49);case 52:return y.a.debug("Latency (ms)",l,Object(m.b)()-s),e.abrupt("return",{txid:l,slot:f});case 54:case"end":return e.stop()}}),e,null,[[10,22,49,52],[28,34]])})))).apply(this,arguments)}function P(e,t,n){return B.apply(this,arguments)}function B(){return(B=Object(u.a)(o.a.mark((function e(t,n,r){var a,c,i,s,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,a=n.serializeMessage(),c=n._serialize(a),i=c.toString("base64"),s=[i,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",s);case 10:if(!(u=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+u.error.message);case 13:return e.abrupt("return",u.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,t,n){return E.apply(this,arguments)}function E(){return(E=Object(u.a)(o.a.mark((function e(t,n,r){var a,c,i,s,f,l=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:"confirmed",c=l.length>4&&void 0!==l[4]&&l[4],i=!1,s={slot:0,confirmations:0,err:null},f=0,e.next=7,new Promise(function(){var e=Object(u.a)(o.a.mark((function e(l,b){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((function(){i||(i=!0,y.a.warn("Rejecting for timeout..."),b({timeout:!0}))}),n);try{f=r.onSignature(t,(function(e,t){i=!0,s={err:e.err,slot:t.slot,confirmations:0},e.err?(y.a.warn("Rejected via websocket",e.err),b(s)):(y.a.debug("Resolved via websocket",e),l(s))}),a)}catch(p){i=!0,y.a.error("WS error in setup",t,p)}case 2:if(i||!c){e.next=8;break}return Object(u.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.getSignatureStatuses([t]);case 3:n=e.sent,s=n&&n.value[0],i||(s?s.err?(y.a.error("REST error for",t,s),i=!0,b(s.err)):s.confirmations?(y.a.debug("REST confirmation for",t,s),i=!0,l(s)):y.a.debug("REST no confirmations for",t,s):y.a.debug("REST null result for",t,s)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i||y.a.error("REST connection error: txid",t,e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))(),e.next=6,Object(m.d)(2e3);case 6:e.next=2;break;case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 7:return s=e.sent,r._signatureSubscriptions[f]&&r.removeSignatureListener(f),i=!0,y.a.debug("Returning status",s),e.abrupt("return",s);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var A,L,K=n(27),_=n(197),C=n(684),F=n(683),M=n(678),W=n(679),I=n(675),z=n(680),N=n(676),U=n(677),Y=n(363),G=n.n(Y),H=n(7),J=Object(K.a)(_.a)(A||(A=Object(b.a)([""]))),q=new p.Connection("https://psytrbhymqlkfrhudd.dev.genesysgo.net:8899/"),Q=!0,V=0,D=Object(K.a)(C.a)((function(e){var t=e.theme;return Object(l.a)(Object(l.a)({},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})}));!function(e){e[e.PreBet=0]="PreBet",e[e.RevealPending=1]="RevealPending"}(L||(L={}));var X=function(){var e=Object(r.useState)(),t=Object(f.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(.2),i=Object(f.a)(c,2),s=i[0],l=i[1],b=Object(d.c)(),h=Object(r.useState)(L.PreBet),j=Object(f.a)(h,2),m=j[0],v=j[1],w=Object(r.useState)(null),y=Object(f.a)(w,2),S=(y[0],y[1]),T=Object(r.useState)(""),P=Object(f.a)(T,2),B=P[0],R=P[1],E=Object(r.useState)(!1),A=Object(f.a)(E,2),K=(A[0],A[1]),_=function(){var e=Object(u.a)(o.a.mark((function e(){var t,r,c,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}return e.abrupt("return");case 2:if(s){e.next=4;break}return e.abrupt("return");case 4:return V=n,R(""),v(L.RevealPending),t=[],r=Object(U.a)().slice(0,8),S(r),e.t0=t,e.next=13,O(b,x.f,r);case 13:return e.t1=e.sent,e.t0.push.call(e.t0,e.t1),e.t2=t,e.next=18,g(b,s,r);case 18:return e.t3=e.sent,e.t2.push.call(e.t2,e.t3),e.next=22,k(q,b,t,[],"singleGossip",!1);case 22:return e.sent,a(n-s),e.next=26,G.a.get("https://warm-river-90393.herokuapp.com/reveal",{params:{player:b.publicKey.toBase58(),uuid:r,env:"devnet"}});case 26:c=e.sent,i="You "+c.data.status+"!",-1!=c.data.status.indexOf("won")&&a(n+2*s),R(i),v(L.PreBet),setTimeout(Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:K(!0);case 1:case"end":return e.stop()}}),e)}))),500),b&&Q&&(Q=!1,setInterval(function(){var e=Object(u.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,q.getBalance(b.publicKey?b.publicKey:n.publicKey);case 3:(r=e.sent)!=V&&(V=r,console.log(r/p.LAMPORTS_PER_SOL),a(r/p.LAMPORTS_PER_SOL)),e.next=14;break;case 7:return e.prev=7,e.t0=e.catch(0),e.t1=setTimeout,e.next=12,t;case 12:e.t2=e.sent,(0,e.t1)(e.t2,1e3);case 14:case"end":return e.stop()}}),e,null,[[0,7]])})));function t(t){return e.apply(this,arguments)}return t}(),1e3));case 33:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!b){e.next=5;break}return e.next=3,q.getBalance(b.publicKey);case 3:t=e.sent,a(t/p.LAMPORTS_PER_SOL);case 5:case"end":return e.stop()}}),e)})))()}),[b]),Object(H.jsx)(H.Fragment,{children:Object(H.jsxs)("main",{className:"container",children:[b&&Object(H.jsxs)("p",{className:"pp",children:["Balance: ",(n||0).toLocaleString()," SOL"]}),!b&&Object(H.jsx)(J,{children:"Connect Wallet"}),b&&m==L.PreBet&&Object(H.jsx)("div",{children:Object(H.jsxs)(F.a,{container:!0,spacing:0,children:[Object(H.jsx)(F.a,{item:!0,xs:4}),Object(H.jsxs)(F.a,{item:!0,xs:4,children:[Object(H.jsx)(D,{children:Object(H.jsxs)(M.a,{fullWidth:!0,sx:{m:1},variant:"filled",children:[Object(H.jsx)(W.a,{htmlFor:"filled-adornment-amount",children:"Amount"}),Object(H.jsx)(I.a,{type:"number",autoFocus:!0,inputProps:{step:.1},id:"filled-adornment-amount",value:s,onChange:function(e){try{var t=parseFloat(e.target.value);t>=1?(setTimeout((function(){return K(!0)}),500),l(1)):t<=.1?(setTimeout((function(){return K(!0)}),500),l(.1)):l(t)}catch(e){setTimeout((function(){return K(!0)}),500)}},startAdornment:Object(H.jsx)(z.a,{position:"start",children:"Bet:"})})]})}),Object(H.jsx)(D,{children:Object(H.jsx)(N.a,{variant:"outlined",onClick:_,children:"Flip Coin"})})]}),Object(H.jsx)(F.a,{item:!0,xs:4})]})}),b&&m==L.RevealPending&&Object(H.jsx)("div",{children:Object(H.jsxs)(F.a,{container:!0,spacing:0,children:[Object(H.jsx)(F.a,{item:!0,xs:4}),Object(H.jsx)(F.a,{item:!0,xs:4,children:Object(H.jsx)("h1",{children:"Flipping & revealing..."})}),Object(H.jsx)(F.a,{item:!0,xs:4})]})}),Object(H.jsxs)(F.a,{container:!0,spacing:0,children:[Object(H.jsx)(F.a,{item:!0,xs:4}),Object(H.jsx)(F.a,{item:!0,xs:4,children:Object(H.jsx)("h2",{className:"pp",children:B})}),Object(H.jsx)(F.a,{item:!0,xs:4})]})]})})},Z=n(135),$=n(377),ee=n(673),te="devnet",ne=Object($.a)({palette:{type:"dark"},overrides:{MuiButtonBase:{root:{justifyContent:"flex-start"}},MuiButton:{root:{textTransform:void 0,padding:"12px 16px"},startIcon:{marginRight:8},endIcon:{marginLeft:8}}}}),re=function(){var e=Object(r.useMemo)((function(){return Object(p.clusterApiUrl)(te)}),[]),t=Object(r.useMemo)((function(){return[Object(Z.a)(),Object(Z.b)(),Object(Z.c)(),Object(Z.e)({network:te}),Object(Z.d)({network:te})]}),[]);return Object(H.jsx)(ee.a,{theme:ne,children:Object(H.jsx)(d.a,{endpoint:e,children:Object(H.jsx)(d.b,{wallets:t,autoConnect:!0,children:Object(H.jsx)(_.b,{children:Object(H.jsx)(X,{})})})})})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,685)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(H.jsx)(a.a.StrictMode,{children:Object(H.jsx)(re,{})}),document.getElementById("root")),ae()},65:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return d}));var r=n(2),a=n.n(r),c=n(3),i=n(13),s=n(55),o=n(31);function u(e){return f.apply(this,arguments)}function f(){return(f=Object(c.a)(a.a.mark((function e(t){var n,r,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new i.Connection("https://solana--devnet.datahub.figment.io/apikey/36eb346d92b67d8fd9046b02347b13f1"),r=new s.c(n,t,{preflightCommitment:"confirmed",commitment:"confirmed"}),e.next=4,s.b.fetchIdl(o.c,r);case 4:return c=e.sent,e.abrupt("return",new s.b(c,o.c,r));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t,n){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function t(n,r,c){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.e.PublicKey.findProgramAddress([e.from("rng_house"),n.publicKey.toBuffer(),r.toBuffer(),e.from(c)],o.c);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(e){return new Promise((function(t){return setTimeout(t,e)}))}var d=function(){return(new Date).getTime()/1e3}}).call(this,n(6).Buffer)}},[[623,1,2]]]);
//# sourceMappingURL=main.ed642155.chunk.js.map